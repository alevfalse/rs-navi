<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="keywords" content="boarding, house, apartments, dormitories, condominiums, school, list, price, address">
    <meta name="description" content="Add your place to be listed as a search result.">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-139123832-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-139123832-1');
    </script>
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/all.min.css" integrity="sha256-7rF6RaSKyh16288E3hVdzQtHyzatA2MQRGu0cf6pqqM=" crossorigin="anonymous" />

    <!-- Map CSS -->
    <link rel="stylesheet" href="/css/map.css" type="text/css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/add-place.css" type="text/css">
    
    <title>RS Navi • Add A Place</title>
</head>
<body>
    <!-- Navbar Component -->
    <% include ./components/navbar.ejs %>

    <% if (locals.message) { 
        if (message.length > 0) { %>
            <!-- Alert Message From Server -->
            <div class="container">
                <div class="row justify-content-center">
                    <div class="alert alert-primary alert-dismissible fade show mt-5" role="alert">
                        <%= locals.message %>
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                </div>
            </div>
        <% } %>
    <% } %>

    <main class="container">
        
        <div class="row justify-content-center">
            <h1 class="display-4 text-center text-white mb-3" id="title">Add A Place</h1>
        </div>

        <section class="row justify-content-center">
            <div class="col-12 col-md-10 col-lg-8 col-xl-6 text-center">

                <form class="collapse show" id="form" autocomplete="off" method="POST" enctype="multipart/form-data" action="/places/add">
                    <div class="form-row mb-3">
                        <div class="col">
                            <input type="text" class="form-control" name="name" placeholder="Place Name" id="name" required>
                        </div>
                        <div class="col">
                            <select class="form-control select_box" name="placeType" id="placeType" required>
                                <option value="" disabled selected hidden>Place Type</option>
                                <option value="0">Boarding House</option>
                                <option value="1">Dormitory</option>
                                <option value="2">Apartment</option>
                                <option value="3">Condominium</option>
                            </select>
                        </div>

                        <div class="col-12 mt-3">
                            <button type="button" class="btn custom-button" id="map-toggler">Pin On Map</button>
                        </div>
                    </div>

                    <section class="collapse" id="place-info">

                        <div class="form-row mb-3">
                            <div class="col-4">
                                <input type="text" class="form-control" name="number" placeholder="Lot/Unit Number" title="Unit/Lot Number" id="number" required>
                            </div>
                            <div class="col">
                                <input type="text" class="form-control" name="street" placeholder="Street" title="Street" id="street" required>
                            </div>
                        </div>

                        <div class="form-row mb-3">
                            <div class="col">
                                <input type="text" class="form-control" name="subdivision" placeholder="Subdivision" title="Subdivision" id="subdivision">
                            </div>
                            <div class="col">
                                <input type="text" class="form-control" name="barangay" placeholder="Barangay" title="Barangay" id="barangay">
                            </div>
                        </div>

                        <div class="form-row mb-3">
                            <div class="col">
                                <input type="text" class="form-control" name="city" placeholder="City" title="City" id="city" required>
                            </div>
                            <div class="col-2">
                                <input type="number" class="form-control" name="zipCode" placeholder="Zip Code" title="Zip Code" id="zipCode">
                            </div>
                            <div class="col">
                                <input type="text" class="form-control" name="province" placeholder="Province" title="Province" id="province" required>
                            </div>
                        </div>

                        <div class="form-row mb-3">
                            <div class="col">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">₱</div>
                                    </div>
                                    <input type="number" class="form-control" placeholder="Price" title="Price" name="price" id="price" required>
                                </div>
                            </div>
                            <div class="col-4">
                                <select class="form-control select_box" name="listType" title="List Type" id="listType" required>
                                    <option value="0" selected>Rent/Sell</option>
                                    <option value="1">Rent</option>
                                    <option value="2">Sell</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row mb-3">
                            <div class="col">
                                <div class="input-group">
                                    <input type="number" class="form-control" name="floors" title="Number of floors" id="floors">
                                    <div class="input-group-append">
                                        <div class="input-group-text">Floors</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="input-group">
                                    <input type="number" class="form-control" name="bedrooms" title="Number of bedrooms" id="bedrooms">
                                    <div class="input-group-append">
                                        <div class="input-group-text">Bedrooms</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="input-group">
                                    <input type="number" class="form-control" name="bathrooms" title="Number of bathroom" id="bathrooms">
                                    <div class="input-group-append">
                                        <div class="input-group-text">Bathrooms</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-row mb-3">
                            <div class="col">
                                <textarea rows="8" class="form-control" name="description" placeholder="Description" id="description" required></textarea>
                            </div>
                            <div></div>
                        </div>

                        <div class="form-row">
                            <div class="col">
                                <button type="button" class="btn custom-button" id="image-gallery-toggler">Add Images</button>
                            </div>
                        </div>

                        <input type="text" class="form-control mb-3" name="coordinates" id="coordinates" hidden required>

                        <div class="form-row">
                            <div class="col">
                                <button type="submit" class="btn custom-button mx-auto mt-3" id="submit-button">Add Place</button>
                            </div>
                        </div>
                    </section>

                    <section class="row justify-content-center text-center">
                        <div class="col" id="image-gallery">
            
                            <div class="custom-file">
                                <input type="file" name="images" id="files" class="custom-file-input" required multiple>
                                <label for="files" class="custom-file-label" id="labelForFiles">Choose Images</label>
                            </div>
        
                            <output id="list" class="container-fluid"></output>
                            
                            <div id="indicators-section" class="carousel slide" data-ride="carousel">
    
                                <ol class="carousel-indicators" id="carousel-indicators">
                                </ol>
        
                                <div class="carousel-inner" id="carousel-inner">
                                </div>
        
                                <a class="carousel-control-prev" href="#indicators-section" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#indicators-section" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>

                            <button type="button" class="btn custom-button mt-3" id="hide-image-button">Back</button>
                        </div>
                    </section>
                </form>
            </div>

            <section class="col-12 col-lg-10 text-center" id="mapSection">
                <input type="text" placeholder="Search" id="searchBox">
                <div id="map" class="border border-primary" title="Pin your place on the map"></div>
                <button type="button" class="btn custom-button border border-info mb-5 text-white" id="hide-map-button">Hide Map</button>
            </section>

        </section>
    </main>

    <% include ./components/footer.ejs %>

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <!-- Boostrap Bundle (Bootstrap JS + Popper.js) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>

    <!-- Map Configuration -->
    <script src="/js/add-place.js"></script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDREAoaQ27rc3JvRN_lyipAak9eT7C3tqQ&libraries=places&callback=loadMapStyles" type="text/javascript"></script>
</body>
</html>
